<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>4 Import, visualize and explore data | Environmental Statistics</title>

    <meta name="author" content="Christina Bogner" />
  
   <meta name="description" content="Lecture notes for the course Environmental Statistics in IMES (UoC), based on the material by ModernDive" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="4 Import, visualize and explore data | Environmental Statistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Lecture notes for the course Environmental Statistics in IMES (UoC), based on the material by ModernDive" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Import, visualize and explore data | Environmental Statistics" />
  
  <meta name="twitter:description" content="Lecture notes for the course Environmental Statistics in IMES (UoC), based on the material by ModernDive" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1/transition.js"></script>
    <script src="libs/bs3compat-0.3.1/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
    <style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
      <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="font-awesome.min.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Summer term 2022">Environmental Statistics</a>:
        <small class="text-muted">Summer term 2022</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="import-visualize-and-explore-data" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Import, visualize and explore data</h1>
<div class="rmdoutcomes">
<ul>
<li>
Import data into R
</li>
<li>
Explain the general call to the function <code>ggplot()</code>
</li>
<li>
Plot 5 frequently used types of graphics
</li>
</ul>
</div>
<div id="data-import-from-text-files" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Data import from text files</h2>
<p>To import a data set from a text file (e.g.Â csv, .txt, .dat) into R, we will use the library <code>readr</code> which is part of the <code>tydiverse</code>. We first load the library.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="import-visualize-and-explore-data.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Letâ€™s assume that the data is stored in the folder <code>data</code>. If this is not your case, change the path accordingly. To load the data, we can choose among several functions that all start with <code>read_</code>. The most generic one is <code>read_delim()</code> where we can specify how the columns are separated (delimited) in the data file.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="import-visualize-and-explore-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a>emissions <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">&#39;data/emissions.csv&#39;</span>, <span class="at">delim =</span> <span class="st">&#39;;&#39;</span>)</span></code></pre></div>
<pre><code>## Rows: 2871 Columns: 6
## â”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
## Delimiter: &quot;;&quot;
## chr  (4): unit, airpol, vehicle, geo
## dbl  (1): values
## date (1): time
## 
## â„¹ Use `spec()` to retrieve the full column specification for this data.
## â„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Letâ€™s have a look at the data. This is a data set on greenhouse gas emissions by source sector in the EU that I downloaded from <a href="https://appsso.eurostat.ec.europa.eu/nui/show.do?dataset=env_air_gge&amp;lang=en">eurostat</a> on 2021-04-30. It contains the greenhouse gas emissions in CO<sub>2</sub> equivalent, in Mio tonnes, per vehicle type. The database could be a great source for data in your reports ðŸ˜„.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="import-visualize-and-explore-data.html#cb22-1" aria-hidden="true" tabindex="-1"></a>emissions</span></code></pre></div>
<pre><code>## # A tibble: 2,871 Ã— 6
##    unit           airpol                         vehicle geo   time       values
##    &lt;chr&gt;          &lt;chr&gt;                          &lt;chr&gt;   &lt;chr&gt; &lt;date&gt;      &lt;dbl&gt;
##  1 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Austâ€¦ 2018-01-01  14.4 
##  2 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Belgâ€¦ 2018-01-01  14.4 
##  3 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Bulgâ€¦ 2018-01-01   5.78
##  4 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Switâ€¦ 2018-01-01  11.0 
##  5 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Cyprâ€¦ 2018-01-01   1.38
##  6 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Czecâ€¦ 2018-01-01  11.9 
##  7 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Germâ€¦ 2018-01-01  97.8 
##  8 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Denmâ€¦ 2018-01-01   6.85
##  9 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Estoâ€¦ 2018-01-01   1.52
## 10 Million tonnes Greenhouse gases (CO2, N2O inâ€¦ Fuel câ€¦ Greeâ€¦ 2018-01-01   7.61
## # â€¦ with 2,861 more rows</code></pre>
<p>The result of reading the data with any function in the library <code>readr</code> is always a <code>tibble</code>. You can see that none of the variables is a <code>factor</code>. This is the default behaviour of <code>readr</code>. If you want a variable to be coded as a <code>factor</code> then you have to transform it manually, preferably with functions from the package <code>forcats</code>.</p>
<p>Letâ€™s have a brief look at the data set.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="import-visualize-and-explore-data.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(emissions)</span></code></pre></div>
<pre><code>##      unit              airpol            vehicle              geo           
##  Length:2871        Length:2871        Length:2871        Length:2871       
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##                                                                             
##       time                values         
##  Min.   :1990-01-01   Min.   :  0.00609  
##  1st Qu.:1997-01-01   1st Qu.:  0.25564  
##  Median :2004-01-01   Median :  1.92403  
##  Mean   :2004-01-01   Mean   :  8.52836  
##  3rd Qu.:2011-01-01   3rd Qu.:  6.93899  
##  Max.   :2018-01-01   Max.   :119.77824  
##                       NA&#39;s   :232</code></pre>
<p>For character variables, <code>summary()</code> does not count the frequency of different values. However, we can get this information with the function <code>unique()</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="import-visualize-and-explore-data.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(emissions<span class="sc">$</span>geo))</span></code></pre></div>
<pre><code>## [1] 33</code></pre>
<p>The data set contains measurements for 33 EU countries. We can also ask which different types of vehicle are recorded.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="import-visualize-and-explore-data.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(emissions<span class="sc">$</span>vehicle)</span></code></pre></div>
<pre><code>## [1] &quot;Fuel combustion in cars&quot;                       
## [2] &quot;Fuel combustion in heavy duty trucks and buses&quot;
## [3] &quot;Fuel combustion in railways&quot;</code></pre>
</div>
<div id="visualization-with-the-library-ggplot2" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Visualization with the library <code>ggplot2</code></h2>
<p>The library <code>ggplot2</code> is a powerful package for data visualization. The name comes from <strong>the grammar of graphics</strong> and hints at a systematic approach to visualization. In a nutshell, <code>ggplot2</code> defines a statistical graphic as follows:</p>
<blockquote>
<p>A statistical graphic is a <code>mapping</code> of variables in a <code>data</code> set to <code>aes</code>thetic attributes of <code>geom</code>etric objects.</p>
</blockquote>
<p>In <code>ggplot2</code>, a graphic is built up step by step, starting with a call to the core function <code>ggplot()</code>. We have to specify the following elements:</p>
<ul>
<li><p><code>data</code>: the data set containing the variables to be visualized.</p></li>
<li><p><code>aes</code>: (aesthetic) attributes for the geometric object to be visualized. This can be the x and y variables, colour, shape, grouping variable etc.</p></li>
<li><p><code>geom</code>: the geometric object we want to plot, i.e.Â lines, points, bars, boxes etc.</p></li>
</ul>
<div id="line-plot" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Line plot</h3>
<p>We start with the line plot that is particularly suited for time series. Because plotting 33 countries in one graph is too much, we first filter for France and emissions from cars.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="import-visualize-and-explore-data.html#cb30-1" aria-hidden="true" tabindex="-1"></a>emissions_france <span class="ot">&lt;-</span> emissions <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="import-visualize-and-explore-data.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(geo <span class="sc">==</span> <span class="st">&#39;France&#39;</span> <span class="sc">&amp;</span> vehicle <span class="sc">==</span> <span class="st">&#39;Fuel combustion in cars&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="import-visualize-and-explore-data.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions_france, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> values))</span></code></pre></div>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-46-1.png" width="90%" /></p>
<p>This call to <code>ggplot()</code> prepares the plotting area as requested, but does not show anything because we did not specify any geometric object. All geometric objects begin with <code>geom_</code>. Every further step in building up the plot is appended to the core call by a <code>+</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="import-visualize-and-explore-data.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions_france, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> values)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="import-visualize-and-explore-data.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-47-1.png" width="90%" /></p>
<p>This call can be verbalized like following:</p>
<ul>
<li><p>Take the data set <code>emissions</code> and map the following attributes:</p>
<ul>
<li>on the <span class="math inline">\(x\)</span>-axis, the variable <code>time</code></li>
<li>on the <span class="math inline">\(y\)</span>-axis, the variable <code>values</code></li>
</ul></li>
<li><p>Plot the data as a line (<code>geom_line()</code>)</p></li>
</ul>
<p>In order for the plot to be useful, we should label the axes correctly (and give it a title, if no figure caption is shown). This is done by adding the function <code>labs()</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="import-visualize-and-explore-data.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions_france, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> values)) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="import-visualize-and-explore-data.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb33-3"><a href="import-visualize-and-explore-data.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Time&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Emissions (Mio tons)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Emissions in France&#39;</span>)</span></code></pre></div>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-48-1.png" width="90%" /></p>
</div>
<div id="point-plot" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Point plot</h3>
<p>We can add points to this plot with <code>geom_point()</code>. Normally, I wouldnâ€™t do it for this time series, but I want to show this geom ðŸ˜„.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="import-visualize-and-explore-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions_france, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> values)) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="import-visualize-and-explore-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb34-3"><a href="import-visualize-and-explore-data.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb34-4"><a href="import-visualize-and-explore-data.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Time&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Emissions (Mio tons)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Emissions in France&#39;</span>)</span></code></pre></div>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-49-1.png" width="90%" /></p>
<p>If we select two countries, then a further aesthetic will be required to distinguish the time series. Letâ€™s select France and Italy.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="import-visualize-and-explore-data.html#cb35-1" aria-hidden="true" tabindex="-1"></a>emissions_france_italy <span class="ot">&lt;-</span> emissions <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="import-visualize-and-explore-data.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(geo <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;France&#39;</span>, <span class="st">&#39;Italy&#39;</span>) <span class="sc">&amp;</span> vehicle <span class="sc">==</span> <span class="st">&#39;Fuel combustion in cars&#39;</span>)</span></code></pre></div>
<p>We plot the countries using different colours. Note that we do not (yet) select the colours manually, but specify the variable that will be used to distinguish the time series. The colours are chosen one by country automatically.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="import-visualize-and-explore-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions_france_italy, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> values, <span class="at">colour =</span> geo)) <span class="sc">+</span> </span>
<span id="cb36-2"><a href="import-visualize-and-explore-data.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb36-3"><a href="import-visualize-and-explore-data.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-4"><a href="import-visualize-and-explore-data.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Time&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Emissions (Mio tons)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Emissions in France and Italy&#39;</span>, <span class="at">colour =</span> <span class="st">&#39;Country&#39;</span>)</span></code></pre></div>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-51-1.png" width="90%" /></p>
<p>The legend comes for free! We can change the title of the legend by setting <code>colour = 'Country'</code> in the call to <code>labs()</code>.</p>
</div>
</div>
<div id="histogram" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Histogram</h2>
<p>Letâ€™s have a look at the distribution of emissions in the year 2018. We have to filter the data first.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="import-visualize-and-explore-data.html#cb37-1" aria-hidden="true" tabindex="-1"></a>emissions_2018 <span class="ot">&lt;-</span> emissions <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="import-visualize-and-explore-data.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time <span class="sc">==</span> <span class="st">&#39;2018-01-01&#39;</span>)</span></code></pre></div>
<p>We plot the data in a histogram that shows the absolute frequencies of the data (i.e.Â how many data points fall in a particular interval of emissions). It shows the distribution of a continuous variable. For a histogram, we only specify the x variable, the frequencies are calculated by <code>geom_histogram()</code> directly. We specify 25 bins (intervals). If you are not familiar with this kind of statistical summaries, please have a look at the Appendix A in <span class="citation">Ismay and Kim (<a href="literature-1.html#ref-ModernDive" role="doc-biblioref">2021</a>)</span> and read the part A.1.5 Distribution.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="import-visualize-and-explore-data.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions_2018, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> values)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="import-visualize-and-explore-data.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 8 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
</div>
<div id="boxplot" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Boxplot</h2>
<p>A boxplot calculates some prominent statistics of a data set and plots them in the form of a box with â€˜whiskersâ€™ (thus also called box-and-whiskers plot). Basically, it is the same as calculating the <code>summary()</code> (five-numbers: min, max, 25%, 50% and 75% quantiles), but as a figure. If you are not familiar with this kind of statistical summaries, please have a look at the Appendix A in <span class="citation">Ismay and Kim (<a href="literature-1.html#ref-ModernDive" role="doc-biblioref">2021</a>)</span> and read the part A.1.4 Five-number summary.</p>
<p>Letâ€™s have a look at this kind of summary plot. How are the emissions distributed by year? We have to convert <code>time</code> to a factor variable to display the data correctly (try out what happens if you donâ€™t convert it).</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="import-visualize-and-explore-data.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(time), <span class="at">y =</span> values)) <span class="sc">+</span></span>
<span id="cb40-2"><a href="import-visualize-and-explore-data.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 232 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-54-1.png" width="90%" /></p>
<p>Hmmm, the labels on the <span class="math inline">\(x\)</span>-axis are ugly. Letâ€™s tune them a little (we will do more tuning in later sessions).</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="import-visualize-and-explore-data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(time), <span class="at">y =</span> values)) <span class="sc">+</span></span>
<span id="cb42-2"><a href="import-visualize-and-explore-data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb42-3"><a href="import-visualize-and-explore-data.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 232 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-55-1.png" width="90%" /></p>
<div id="barplot" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Barplot</h3>
<p>The last geom we want to see is <code>geom_bar()</code>. We would like to know how many data entries does <code>emissions</code> contain per vehicle.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="import-visualize-and-explore-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> emissions, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> vehicle)) <span class="sc">+</span></span>
<span id="cb44-2"><a href="import-visualize-and-explore-data.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="environmental_stat_files/figure-html/unnamed-chunk-56-1.png" width="90%" /></p>
<p>Admittedly, a boring plot ðŸ˜„, the number of entries is identical.</p>
</div>
</div>
<div id="practice-on-your-own-3" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Practice on your own!</h2>
<ol class="exercises">
<ol style="list-style-type: decimal">
<li><p>The histogram, the boxplot and the barplot plotted above are not labelled correctly. Correct the axis labels and find good titles for the graphs.</p></li>
<li><p>Plot the time series of GDP from the data set <code>gapminder</code> for France and Germany. Filter the data like this:
<br>
<code>france_germany &lt;- gapminder %&gt;% filter(country %in% c('France', 'Germany'))</code></p></li>
<li><p>Plot the life expectancy vs.Â GDP in 2007, use the data set <code>gapminder</code>. Pick the code for filtering the data in task <a href="additional-exercises.html#firstplot">C.1.3</a>. Use the aesthetics colour and size. Have an educated guess on how to change the title of the legends (or google for it ðŸ˜„).</p></li>
<li><p>How is the GDP distributed in Africa and Europe in 2007? Use the data set <code>gapminder</code>. Filter the data like this:
<br>
<code>africa_europe &lt;- gapminder2007 %&gt;% filter(continent %in% c('Africa', 'Europe'))</code>.
<br>
Plot the data as a histogram and use the aesthetic fill instead of colour to distinguish between continents.</p></li>
<li><p>How is the GDP distributed on different continents in 2007? Use the data set <code>gapminder</code>. Plot the data as a boxplot.</p></li>
<li><p>How many data points does <code>gapminder</code> contain per continent? Visualize in a barplot.</p></li>
</ol>
</ol>
</div>
<div id="reading-assignment-2" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Reading assignment</h2>
<p>Chapter 2.1 in <span class="citation">Ismay and Kim (<a href="literature-1.html#ref-ModernDive" role="doc-biblioref">2021</a>)</span></p>
</div>
<div id="turning-in-your-work-3" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Turning in your work</h2>
<ul>
<li>Save your R Notebook as an *.Rmd file.</li>
<li>Upload your R Notebook to ILIAS. You donâ€™t need to upload the .nb.html file. You will find an upload option in todayâ€™s session.</li>
<li>You should receive a solution file after your upload. <strong>Be sure to upload before the deadline!</strong></li>
</ul>
</div>
<div id="additional-reading-1" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> Additional reading</h2>
<p>Chapters 2.2 to 2.9 in <span class="citation">Ismay and Kim (<a href="literature-1.html#ref-ModernDive" role="doc-biblioref">2021</a>)</span></p>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Environmental Statistics</strong>: Summer term 2022" was written by Christina Bogner. It was last built on 2022-06-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
